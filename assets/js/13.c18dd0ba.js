(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{400:function(s,a,t){"use strict";t.r(a);var n=t(13),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"查看运行时-jvm-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看运行时-jvm-参数"}},[s._v("#")]),s._v(" 查看运行时 JVM 参数")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("-XX:+PrintFlagsInitial")]),s._v("：查看初始值")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-XX:+PrintFlagsFinal")]),s._v("：查看最终的值")]),s._v(" "),t("p",[s._v("一般都有一个默认值，可以通过命令行等配置方式覆盖掉这个默认值，这里查看的则是这个最终的值")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-XX:+UnlockExperimentaIVMOptions")]),s._v("：解锁实验参数")]),s._v(" "),t("p",[s._v("JVM 中有一部分参数是无法直接赋值的，需要加该参数，解锁实验参数，才能配置")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-XX:UnlockDiagnosticVMOpeions")]),s._v("：解锁诊断参数")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-XX:+PrintCommandLineFlags")]),s._v("：打印命令行参数")])])]),s._v(" "),t("h2",{attrs:{id:"printflagsfinal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#printflagsfinal"}},[s._v("#")]),s._v(" PrintFlagsFinal")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mrcode:~ mrcode$ java -XX:+PrintFlagsInitial -version\n[Global flags]\n     intx ActiveProcessorCount              = -1                                 uintx\n     MaxHeapSize                            := 4294967296                        {product}\n     bool UseThreadPriorities               = true                               {pd product}\n     bool UseTypeProfile                    = true                               {product}\n     bool UseTypeSpeculation                = true                               {C2 product}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("注："),t("code",[s._v("=")]),s._v(" 表示默认值，"),t("code",[s._v(":=")]),s._v("  表示被用户或则 JVM 修改后的值")]),s._v(" "),t("p",[s._v("这个命令查看的是当前运行这个命令的进程 "),t("code",[s._v("java -XX:+PrintFlagsInitial -version")]),s._v(" 的值，运行这一条，也会去启动一个 java 进程，那么打印的参数则是这个进程的参数。如何查看一个正在运行的 JVM 进程参数，是后面课程要讲解的。")]),s._v(" "),t("h2",{attrs:{id:"jps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jps"}},[s._v("#")]),s._v(" jps")]),s._v(" "),t("p",[s._v("jps 是专门用来查看 Java 进程的工具。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mrcode:~ mrcode$ jps -help\nusage: jps "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-help"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n       jps "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-q"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-mlvV"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nDefinitions:\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前的 java 进程，左侧是进程 ID，右侧是名称")]),s._v("\nmrcode:~ mrcode$ jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35984")]),s._v(" Launcher\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39312")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45777")]),s._v(" Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("478")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2255")]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：显示完整的名称，显示应用程序main类的完整程序包名称或应用程序JAR文件的完整路径名")]),s._v("\nmrcode:~ mrcode$ jps -l\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35984")]),s._v(" org.jetbrains.jps.cmdline.Launcher\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39312")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45778")]),s._v(" sun.tools.jps.Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("478")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2255")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("这些参数的含义在 JDK 官方文档上有，名字叫  "),t("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java平台，标准版工具参考"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("比如这里的 "),t("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("jps 工具"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"jinfo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jinfo"}},[s._v("#")]),s._v(" jinfo")]),s._v(" "),t("p",[s._v("查看正在运行的 JVM 进程信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mrcode:~ mrcode$ jinfo --help\nUsage:\n    jinfo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to connect to running process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    jinfo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("executable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("core"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to connect to a core "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    jinfo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("server_id@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote server IP or hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to connect to remote debug server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nwhere "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" is one of:\n    -flag "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("         to print the value of the named VM flag\n    -flag "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" or disable the named VM flag\n    -flag "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the named VM flag to the given value\n    -flags               to print VM flags\n    -sysprops            to print Java system properties\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("no option"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          to print both of the above\n    -h "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" -help           to print this "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" message\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("比如，查看其中某一个 JVM 进程的最大堆内存")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里查询的是我本机上 idea 的最大对内存")]),s._v("\nmrcode:~ mrcode$ jinfo -flag MaxHeapSize "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35984")]),s._v("\n-XX:MaxHeapSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("734003200")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里的单位是 byte，也就是 725MB")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("code",[s._v("-flags")]),s._v(" 查看非 JVM 默认参数信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里查看的是一个 spring cloud 的一个网关程序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jinfo -flags 12299")]),s._v("\nAttaching to process ID "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12299")]),s._v(", please wait"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nDebugger attached successfully.\nServer compiler detected.\nJVM version is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.111")]),s._v("-b14\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不是 JVM 默认参数，被修改过")]),s._v("\nNon-default VM flags: -XX:CICompilerCount"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" -XX:InitialHeapSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("62914560")]),s._v(" -XX:MaxHeapSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576000")]),s._v(" -XX:MaxNewSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("349175808")]),s._v(" -XX:MinHeapDeltaBytes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("524288")]),s._v(" -XX:NewSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20971520")]),s._v(" -XX:OldSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseFastUnorderedTimeStamps -XX:+UseParallelGC \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里是前几天我通过命令行运行程序的时候加上的 java -Xmx1000m -jar xxx")]),s._v("\nCommand line:  -Xmx1000m\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("查看垃圾回收器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jinfo -flag UseConcMarkSweepGC 12299")]),s._v("\n-XX:-UseConcMarkSweepGC\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jinfo -flag UseG1GC 12299")]),s._v("\n-XX:-UseG1GC\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jinfo -flag UseParallelGC 12299")]),s._v("\n-XX:+UseParallelGC\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);