(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{332:function(s,a,t){s.exports=t.p+"assets/img/image-20210116223917540.775b6015.png"},401:function(s,a,t){"use strict";t.r(a);var e=t(13),v=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"查看-jvm-统计信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看-jvm-统计信息"}},[s._v("#")]),s._v(" 查看 JVM 统计信息")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html#BEHHGFAE",target:"_blank",rel:"noopener noreferrer"}},[s._v("jstat"),e("OutboundLink")],1),s._v(" 可以查询以下几类等的：")]),s._v(" "),e("ul",[e("li",[s._v("类装载")]),s._v(" "),e("li",[s._v("垃圾收集")]),s._v(" "),e("li",[s._v("JIT 编译")])]),s._v(" "),e("h2",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("jstat "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" generalOption "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" outputOptions vmid "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" interval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("s"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ms"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("generalOption：单个常规命令行选项")]),s._v(" "),e("p",[s._v("可以通过 "),e("code",[s._v("jstat -options")]),s._v("  输出支持的命令，比如常见的有")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-class")]),s._v("：类加载")]),s._v(" "),e("li",[e("code",[s._v("-compiler")]),s._v("：JIT 编译信息")]),s._v(" "),e("li",[e("code",[s._v("-gc")]),s._v("：垃圾回收信息")]),s._v(" "),e("li",[e("code",[s._v("-printcompilation")]),s._v("：显示Java HotSpot VM编译方法统计信息")])])]),s._v(" "),e("li",[e("p",[s._v("outputOptions：一个或由单个的多输出选项")])]),s._v(" "),e("li",[e("p",[s._v("vmid：虚拟机标识符，一般用进程 id，还可以写完整的远程服务器上的进程 id")])]),s._v(" "),e("li",[e("p",[s._v("interval：采样间隔，默认单位是毫秒（可以为秒），制定后，则间隔多长时间输出一次")])]),s._v(" "),e("li",[e("p",[s._v("count：要显示的样本数量，也就是输出几次")])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("再次提示：去阅读官方该工具的介绍")])]),s._v(" "),e("h2",{attrs:{id:"类装载信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#类装载信息"}},[s._v("#")]),s._v(" 类装载信息")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mrcode:~ mrcode$ jstat -class "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("46129")]),s._v("\nLoaded  Bytes  Unloaded  Bytes     Time   \n  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3315")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6334.5")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.36")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("类加载器统计信息：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("Loaded")]),s._v("：已加载的类数。")]),s._v(" "),e("li",[e("code",[s._v("Bytes")]),s._v("：加载的 kB 数。")]),s._v(" "),e("li",[e("code",[s._v("Unloaded")]),s._v("：卸载的类数。")]),s._v(" "),e("li",[e("code",[s._v("Bytes")]),s._v("：卸载的KB数。")]),s._v(" "),e("li",[e("code",[s._v("Time")]),s._v("：执行类加载和卸载操作所花费的时间。")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("再次提示：去阅读官方该工具的介绍，上面的每列含义都是文档中复制过来的")])]),s._v(" "),e("h2",{attrs:{id:"垃圾收集信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#垃圾收集信息"}},[s._v("#")]),s._v(" 垃圾收集信息")]),s._v(" "),e("p",[s._v("与垃圾收集信息有关的选项有：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-gc")])]),s._v(" "),e("li",[e("code",[s._v("-gcutil")])]),s._v(" "),e("li",[e("code",[s._v("-gccause")])]),s._v(" "),e("li",[e("code",[s._v("-gcnew")])]),s._v(" "),e("li",[e("code",[s._v("-gcold")])])]),s._v(" "),e("h3",{attrs:{id:"gc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gc"}},[s._v("#")]),s._v(" "),e("code",[s._v("-gc")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mrcode:~ mrcode$ jstat -gc "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("46129")]),s._v("\n\n S0C  S1C  S0U  S1U   EC    EU    OC     OU    MC   MU  CCSC  CCSU  YGC   YGCT  FGC  FGCT   GCT  \n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10752.0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10752.0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4479.4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536.0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15266.7")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("175104.0")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("144.0")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18048.0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17391.3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2176.0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2004.6")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.004")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.004")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("S0C、S1C、S0U、S1U")]),s._v("：S0 和 S1 的总量与使用量")]),s._v(" "),e("li",[e("code",[s._v("EC、EU")]),s._v("：Eden 区总量与使用量")]),s._v(" "),e("li",[e("code",[s._v("OC、OU")]),s._v("：Old 区总量与使用量")]),s._v(" "),e("li",[e("code",[s._v("MC、MU")]),s._v("：Metaspace 区总量与使用量")]),s._v(" "),e("li",[e("code",[s._v("CCSC、CCSU")]),s._v("：压缩类空间总量与使用量")]),s._v(" "),e("li",[e("code",[s._v("YGC、YGCT")]),s._v("：YoungGC 的次数与时间")]),s._v(" "),e("li",[e("code",[s._v("FGC、FGCT")]),s._v("：FullGC 的次数与时间")]),s._v(" "),e("li",[e("code",[s._v("GCT")]),s._v("：总的 GC 时间")])]),s._v(" "),e("p",[s._v("以上的参数信息对于我们的 gc 调优来说相当重要，再配不停的输出每秒的 GC 信息，也能很清楚的看到 GC 的变化。")]),s._v(" "),e("p",[s._v("还有其他的选项，可以输出各种的信息，详细请查阅文档。")]),s._v(" "),e("h2",{attrs:{id:"jvm-内存结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jvm-内存结构"}},[s._v("#")]),s._v(" JVM 内存结构")]),s._v(" "),e("p",[s._v("根据前面的输出信息，可以简单的把 JVM 内存结构画出来")]),s._v(" "),e("p",[e("img",{attrs:{src:t(332),alt:"image-20210116223917540"}})]),s._v(" "),e("ul",[e("li",[e("p",[s._v("堆区：JVM 堆内存")]),s._v(" "),e("p",[s._v("由以下两部分组成：")]),s._v(" "),e("ol",[e("li",[s._v("Young：中的 S0 和 S1 在同一时间只会有一个有值，另一个为 0")]),s._v(" "),e("li",[s._v("Old")])])]),s._v(" "),e("li",[e("p",[s._v("非堆区：操作系统内存（JDK 8 中称为 Metaspace）")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("CCS：启用了压缩指针时，就会存在该区域")])]),s._v(" "),e("li",[e("p",[s._v("CodeCache：JIT 的代码信息，把 JAVA 代码转换成 native（C）  代码")]),s._v(" "),e("p",[s._v("如果没有开启 JIT 编译的话，这块内存也不存在")])])])])]),s._v(" "),e("h2",{attrs:{id:"jit-编译"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jit-编译"}},[s._v("#")]),s._v(" JIT 编译")]),s._v(" "),e("p",[s._v("有两个选项：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-compiler")]),s._v("：显示有关 Java HotSpot VM 即时编译器行为的统计信息。")]),s._v(" "),e("li",[e("code",[s._v("-printcompilation")]),s._v("：显示 Java HotSpot VM 编译方法统计信息。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mrcode:~ mrcode$ jstat -compiler "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("47503")]),s._v("\nCompiled Failed Invalid   Time   FailedType FailedMethod\n      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.02")]),s._v("          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[e("p",[e("code",[s._v("Compiled")]),s._v("：执行的编译任务数。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Failed")]),s._v("：编译任务数失败。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Invalid")]),s._v("：无效的编译任务数。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Time")]),s._v("：执行编译任务所花费的时间。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("FailedType")]),s._v("：上次失败的编译的编译类型。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("FailedMethod")]),s._v("：上次失败的编译的类名和方法。")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mrcode:~ mrcode$ jstat -printcompilation "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("47503")]),s._v("\nCompiled  Size  Type Method\n      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" java/net/URL getAuthority\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[e("p",[e("code",[s._v("Compiled")]),s._v("：由最近编译的方法执行的编译任务数。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Size")]),s._v("：最近编译的方法的字节码的字节数。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Type")]),s._v("：最近编译的方法的编译类型。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Method")]),s._v("：标识最近编译的方法的类名和方法名。")]),s._v(" "),e("p",[s._v("类名使用斜杠（"),e("code",[s._v("/")]),s._v("）代替点（"),e("code",[s._v(".")]),s._v("）作为名称空间分隔符。方法名称是指定类中的方法。这两个字段的格式与 "),e("code",[s._v("HotSpot -XX:+PrintCompilation")]),s._v(" 选项一致。")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);