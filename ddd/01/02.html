<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>02 | 领域、子域、核心域、通用域和支撑域：傻傻分不清？ | NOTE-BOOK2</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/note-book2/favicon.ico">
    <link rel="manifest" href="/note-book2/manifest.json">
    <meta name="description" content="note-book 的第二分仓笔记仓库">
    
    <link rel="preload" href="/note-book2/assets/css/0.styles.36b9479e.css" as="style"><link rel="preload" href="/note-book2/assets/js/app.c231c0a5.js" as="script"><link rel="preload" href="/note-book2/assets/js/2.64eb5107.js" as="script"><link rel="preload" href="/note-book2/assets/js/67.c393eaf5.js" as="script"><link rel="preload" href="/note-book2/assets/js/50.da39fd24.js" as="script"><link rel="prefetch" href="/note-book2/assets/js/10.f2f15088.js"><link rel="prefetch" href="/note-book2/assets/js/100.b7a284fd.js"><link rel="prefetch" href="/note-book2/assets/js/101.54042053.js"><link rel="prefetch" href="/note-book2/assets/js/102.5bab3651.js"><link rel="prefetch" href="/note-book2/assets/js/103.3d283f19.js"><link rel="prefetch" href="/note-book2/assets/js/104.2fbe9651.js"><link rel="prefetch" href="/note-book2/assets/js/105.3e2ec64c.js"><link rel="prefetch" href="/note-book2/assets/js/106.25ccda3b.js"><link rel="prefetch" href="/note-book2/assets/js/107.90cc2754.js"><link rel="prefetch" href="/note-book2/assets/js/108.4e4472c8.js"><link rel="prefetch" href="/note-book2/assets/js/109.8c927ccc.js"><link rel="prefetch" href="/note-book2/assets/js/11.57132374.js"><link rel="prefetch" href="/note-book2/assets/js/110.6e9ab0a5.js"><link rel="prefetch" href="/note-book2/assets/js/111.cf4db3b8.js"><link rel="prefetch" href="/note-book2/assets/js/112.db9efc72.js"><link rel="prefetch" href="/note-book2/assets/js/113.bc497656.js"><link rel="prefetch" href="/note-book2/assets/js/114.7b29fa0f.js"><link rel="prefetch" href="/note-book2/assets/js/115.6ecd72ad.js"><link rel="prefetch" href="/note-book2/assets/js/116.714ba37d.js"><link rel="prefetch" href="/note-book2/assets/js/117.20fc6ca9.js"><link rel="prefetch" href="/note-book2/assets/js/118.23c68cc5.js"><link rel="prefetch" href="/note-book2/assets/js/119.22353b91.js"><link rel="prefetch" href="/note-book2/assets/js/12.e186564a.js"><link rel="prefetch" href="/note-book2/assets/js/13.8f2e6b3f.js"><link rel="prefetch" href="/note-book2/assets/js/14.5af7e630.js"><link rel="prefetch" href="/note-book2/assets/js/15.2ee25eab.js"><link rel="prefetch" href="/note-book2/assets/js/16.0f760848.js"><link rel="prefetch" href="/note-book2/assets/js/17.82010583.js"><link rel="prefetch" href="/note-book2/assets/js/18.94bb2fcd.js"><link rel="prefetch" href="/note-book2/assets/js/19.8d83e367.js"><link rel="prefetch" href="/note-book2/assets/js/20.9853e81d.js"><link rel="prefetch" href="/note-book2/assets/js/21.a60e512a.js"><link rel="prefetch" href="/note-book2/assets/js/22.0a718618.js"><link rel="prefetch" href="/note-book2/assets/js/23.d0085c3c.js"><link rel="prefetch" href="/note-book2/assets/js/24.64c99be0.js"><link rel="prefetch" href="/note-book2/assets/js/25.7f138222.js"><link rel="prefetch" href="/note-book2/assets/js/26.c38b4f1f.js"><link rel="prefetch" href="/note-book2/assets/js/27.3c23ee36.js"><link rel="prefetch" href="/note-book2/assets/js/28.1c3a554b.js"><link rel="prefetch" href="/note-book2/assets/js/29.1080ae7e.js"><link rel="prefetch" href="/note-book2/assets/js/3.39c53e9a.js"><link rel="prefetch" href="/note-book2/assets/js/30.e12e7194.js"><link rel="prefetch" href="/note-book2/assets/js/31.1b4d10d3.js"><link rel="prefetch" href="/note-book2/assets/js/32.088b464e.js"><link rel="prefetch" href="/note-book2/assets/js/33.b6d5b301.js"><link rel="prefetch" href="/note-book2/assets/js/34.07a7bd18.js"><link rel="prefetch" href="/note-book2/assets/js/35.c1778ec0.js"><link rel="prefetch" href="/note-book2/assets/js/36.9c952bcf.js"><link rel="prefetch" href="/note-book2/assets/js/37.538120d6.js"><link rel="prefetch" href="/note-book2/assets/js/38.379b1ac9.js"><link rel="prefetch" href="/note-book2/assets/js/39.9825dc44.js"><link rel="prefetch" href="/note-book2/assets/js/4.80b43ba9.js"><link rel="prefetch" href="/note-book2/assets/js/40.7502629c.js"><link rel="prefetch" href="/note-book2/assets/js/41.e918a100.js"><link rel="prefetch" href="/note-book2/assets/js/42.6d79fd40.js"><link rel="prefetch" href="/note-book2/assets/js/43.f40c79b3.js"><link rel="prefetch" href="/note-book2/assets/js/44.a6ed9342.js"><link rel="prefetch" href="/note-book2/assets/js/45.58d7b7db.js"><link rel="prefetch" href="/note-book2/assets/js/46.3e86cb70.js"><link rel="prefetch" href="/note-book2/assets/js/47.1ceb15d6.js"><link rel="prefetch" href="/note-book2/assets/js/48.7405fe2c.js"><link rel="prefetch" href="/note-book2/assets/js/49.f512df2d.js"><link rel="prefetch" href="/note-book2/assets/js/5.a817fe71.js"><link rel="prefetch" href="/note-book2/assets/js/51.1befb9db.js"><link rel="prefetch" href="/note-book2/assets/js/52.ee2cc35e.js"><link rel="prefetch" href="/note-book2/assets/js/53.b7d4d642.js"><link rel="prefetch" href="/note-book2/assets/js/54.311d704e.js"><link rel="prefetch" href="/note-book2/assets/js/55.b99d68c9.js"><link rel="prefetch" href="/note-book2/assets/js/56.3260f107.js"><link rel="prefetch" href="/note-book2/assets/js/57.4c3d32ae.js"><link rel="prefetch" href="/note-book2/assets/js/58.858f5030.js"><link rel="prefetch" href="/note-book2/assets/js/59.5bb43d22.js"><link rel="prefetch" href="/note-book2/assets/js/6.e66ff3e3.js"><link rel="prefetch" href="/note-book2/assets/js/60.604f3715.js"><link rel="prefetch" href="/note-book2/assets/js/61.133da1fe.js"><link rel="prefetch" href="/note-book2/assets/js/62.b9d97f09.js"><link rel="prefetch" href="/note-book2/assets/js/63.b54ac379.js"><link rel="prefetch" href="/note-book2/assets/js/64.11aa21b9.js"><link rel="prefetch" href="/note-book2/assets/js/65.f7fc56f3.js"><link rel="prefetch" href="/note-book2/assets/js/66.01d7b8b5.js"><link rel="prefetch" href="/note-book2/assets/js/68.710d8a76.js"><link rel="prefetch" href="/note-book2/assets/js/69.d3d86051.js"><link rel="prefetch" href="/note-book2/assets/js/7.cf57fdd5.js"><link rel="prefetch" href="/note-book2/assets/js/70.8466e474.js"><link rel="prefetch" href="/note-book2/assets/js/71.e4c9766c.js"><link rel="prefetch" href="/note-book2/assets/js/72.efa3abc7.js"><link rel="prefetch" href="/note-book2/assets/js/73.534593d2.js"><link rel="prefetch" href="/note-book2/assets/js/74.74bf2cc7.js"><link rel="prefetch" href="/note-book2/assets/js/75.84a69486.js"><link rel="prefetch" href="/note-book2/assets/js/76.6a4151a2.js"><link rel="prefetch" href="/note-book2/assets/js/77.bc69de12.js"><link rel="prefetch" href="/note-book2/assets/js/78.ef857f92.js"><link rel="prefetch" href="/note-book2/assets/js/79.a994a308.js"><link rel="prefetch" href="/note-book2/assets/js/8.1e1b7412.js"><link rel="prefetch" href="/note-book2/assets/js/80.bb3ad06d.js"><link rel="prefetch" href="/note-book2/assets/js/81.65c1333d.js"><link rel="prefetch" href="/note-book2/assets/js/82.261800cd.js"><link rel="prefetch" href="/note-book2/assets/js/83.44998c31.js"><link rel="prefetch" href="/note-book2/assets/js/84.85b6a88a.js"><link rel="prefetch" href="/note-book2/assets/js/85.9a33a277.js"><link rel="prefetch" href="/note-book2/assets/js/86.1d5b478f.js"><link rel="prefetch" href="/note-book2/assets/js/87.a2ea9583.js"><link rel="prefetch" href="/note-book2/assets/js/88.aa59be86.js"><link rel="prefetch" href="/note-book2/assets/js/89.9f568c0c.js"><link rel="prefetch" href="/note-book2/assets/js/9.bfb9d1de.js"><link rel="prefetch" href="/note-book2/assets/js/90.83f66c97.js"><link rel="prefetch" href="/note-book2/assets/js/91.7eec9066.js"><link rel="prefetch" href="/note-book2/assets/js/92.edafca68.js"><link rel="prefetch" href="/note-book2/assets/js/93.a12f5c78.js"><link rel="prefetch" href="/note-book2/assets/js/94.bdaa08e2.js"><link rel="prefetch" href="/note-book2/assets/js/95.37064771.js"><link rel="prefetch" href="/note-book2/assets/js/96.610fe9bd.js"><link rel="prefetch" href="/note-book2/assets/js/97.5f6322c4.js"><link rel="prefetch" href="/note-book2/assets/js/98.175c6f9c.js"><link rel="prefetch" href="/note-book2/assets/js/99.e9545cc8.js">
    <link rel="stylesheet" href="/note-book2/assets/css/0.styles.36b9479e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-book2/" class="home-link router-link-active"><img src="/note-book2/mlogo.svg" alt="NOTE-BOOK2" class="logo"> <span class="site-name can-hide">NOTE-BOOK2</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-book2/monitor-tuning/" class="nav-link">
  JAVA 生产环境下性能监控与调优详解
</a></div><div class="nav-item"><a href="/note-book2/http-protocol/" class="nav-link">
  透视 HTTP 协议
</a></div><div class="nav-item"><a href="/note-book2/ddd/" class="nav-link router-link-active">
  DDD 实战课
</a></div> <a href="https://github.com/zq99299/note-book2" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-book2/monitor-tuning/" class="nav-link">
  JAVA 生产环境下性能监控与调优详解
</a></div><div class="nav-item"><a href="/note-book2/http-protocol/" class="nav-link">
  透视 HTTP 协议
</a></div><div class="nav-item"><a href="/note-book2/ddd/" class="nav-link router-link-active">
  DDD 实战课
</a></div> <a href="https://github.com/zq99299/note-book2" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/note-book2/ddd/" aria-current="page" class="sidebar-link">DDD 实战课</a></li><li><a href="/note-book2/ddd/00/" class="sidebar-link">开篇 | 学好了 DDD，你能做什么？</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-book2/ddd/01/" class="sidebar-heading clickable router-link-active open"><span>基础篇</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-book2/ddd/01/01.html" class="sidebar-link">01 | 领域驱动设计：微服务设计为什么要选择 DDD?</a></li><li><a href="/note-book2/ddd/01/02.html" aria-current="page" class="active sidebar-link">02 | 领域、子域、核心域、通用域和支撑域：傻傻分不清？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-book2/ddd/01/02.html#如何理解领域和子域" class="sidebar-link">如何理解领域和子域？</a></li><li class="sidebar-sub-header"><a href="/note-book2/ddd/01/02.html#如何理解核心域、通用域和支撑域" class="sidebar-link">如何理解核心域、通用域和支撑域？</a></li><li class="sidebar-sub-header"><a href="/note-book2/ddd/01/02.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/note-book2/ddd/01/02.html#思考题" class="sidebar-link">思考题</a></li><li class="sidebar-sub-header"><a href="/note-book2/ddd/01/02.html#拓展阅读" class="sidebar-link">拓展阅读</a></li></ul></li><li><a href="/note-book2/ddd/01/03.html" class="sidebar-link">03 | 限界上下文：定义领域边界的利器</a></li><li><a href="/note-book2/ddd/01/04.html" class="sidebar-link">04 | 实体和值对象：从领域模型的基础单元看系统设计</a></li><li><a href="/note-book2/ddd/01/05.html" class="sidebar-link">05 | 聚合和聚合根：怎样设计聚合？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-book2/ddd/02/" class="sidebar-heading clickable"><span>进阶篇</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-book2/ddd/03/" class="sidebar-heading clickable"><span>实战篇</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/note-book2/ddd/04/" class="sidebar-link">结束 | 所谓高手，就是跨过坑和大海！</a></li><li><a href="/note-book2/ddd/04/01.html" class="sidebar-link">基于 DDD 的微服务设计实例代码详解</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_02-领域、子域、核心域、通用域和支撑域-傻傻分不清"><a href="#_02-领域、子域、核心域、通用域和支撑域-傻傻分不清" class="header-anchor">#</a> 02 | 领域、子域、核心域、通用域和支撑域：傻傻分不清？</h1> <p>DDD 的知识体系提出了很多的名词，像：领域、子域、核心域、通用域、支撑域、限界上下文、聚合、聚合根、实体、值对象等等，非常多。这些名词，都是关键概念，但它们实在有些晦涩难懂，可能导致你还没开始实践 DDD 就打起了退堂鼓。因此，在基础篇中，我希望能带着你一起做好实践前的准备工作。</p> <p>除此之外，我想说的是，这些名词在你的微服务设计和开发过程中不一定都用得上，<strong>但它可以帮你理解 DDD 的核心设计思想和理念</strong> 。而这些思想和理念，在 IT 战略设计、业务建模和微服务设计中都是可以借鉴的。</p> <p>那么，从这讲开始，我就会围绕以上这些 DDD 关键概念进行讲解，帮助你彻底理清它们与微服务的关系，了解它们在微服务设计中的作用。今天我们重点了解 DDD 的领域、子域、核心域、通用域和支撑域等重要概念。</p> <h2 id="如何理解领域和子域"><a href="#如何理解领域和子域" class="header-anchor">#</a> 如何理解领域和子域？</h2> <p>我们先看一下汉语词典中对领域的解释：领域是从事一种专门活动或事业的 <strong>范围</strong> 、部类或部门。</p> <p>百度百科对领域的解释：领域具体指一种特定的 <strong>范围</strong> 或区域。</p> <p><strong>两个解释有一个共同点——范围</strong> 。对了！领域就是用来确定范围的，<strong>范围即边界</strong> ，这也是 DDD 在设计中不断强调边界的原因。</p> <p>在研究和解决业务问题时，DDD 会按照一定的规则 <strong>将业务领域进行细分</strong> ，当领域细分到一定的程度后，<strong>DDD 会将问题范围限定在特定的边界内</strong> ，在这个边界内建立领域模型，进而用代码实现该领域模型，解决相应的业务问题。简言之，<strong>DDD 的领域就是这个边界内要解决的业务问题域</strong> 。</p> <p>既然领域是用来限定业务边界和范围的，那么就会有大小之分，领域越大，业务范围就越大，反之则相反。</p> <p><strong>领域可以进一步划分为子领域。我们把划分出来的多个子领域称为子域</strong> ，每个子域对应一个更小的问题域或更小的业务范围。</p> <p>我们知道，DDD 是一种处理高度复杂领域的设计思想，它试图分离技术实现的复杂度。那么面对错综复杂的业务领域，DDD 是如何使业务从复杂变得简单，更容易让人理解，技术实现更容易呢？</p> <p>其实很好理解，DDD 的研究方法与自然科学的研究方法类似。当人们在自然科学研究中遇到复杂问题时，通常的做法就是 <strong>将问题一步一步地细分，再针对细分出来的问题域，逐个深入研究 ，探索和建立所有子域的知识体系</strong> 。当所有问题子域完成研究时，我们就建立了全部领域的完整知识体系了。</p> <p><img src="/note-book2/assets/img/c99d4ef4fe28f483938e4fa03afb98c3.c99d4ef4.jpg" alt="img"></p> <p>我们来看一下上面这张图。这个例子是在讲如何给桃树建立一个完整的生物学知识体系。初中生物课其实早就告诉我们研究方法了。 <strong>它的研究过程是这样的。</strong></p> <ol><li><p>确定研究对象，即研究领域，这里是一棵桃树。</p></li> <li><p>对研究对象进行细分</p> <p>将桃树细分为器官，器官又分为营养器官和生殖器官两种。</p> <p>其中营养器官包括根、茎和叶，生殖器官包括花、果实和种子。</p> <p>桃树的知识体系是我们已经确定要研究的问题域，对应 DDD 的领域。根、茎、叶、花、果实和种子等器官则是细分后的问题子域。这个过程就是 DDD 将领域细分为多个子域的过程。</p></li> <li><p>对器官进行细分，将器官细分为组织。</p> <p>比如，叶子器官可细分为保护组织、营养组织和输导组织等。这个过程就是 DDD 将子域进一步细分为多个子域的过程。</p></li> <li><p>对组织进行细分，将组织细分为细胞，细胞成为我们研究的最小单元。</p> <p>细胞之间的细胞壁确定了单元的边界，也确定了研究的最小边界。</p></li></ol> <p>这里先剧透一点聚合、聚合根、实体以及值对象的内容，我还会在 [第 04 讲] 和 [第 05 讲] 中详细讲解。</p> <p>我们知道细胞核、线粒体、细胞膜等物质共同构成细胞，这些物质 <strong>一起协作</strong> 让细胞具有这类细胞 <strong>特定的生物功能</strong> 。在这里，你可以这样理解：</p> <ul><li>细胞理解为 DDD 的 <strong>聚合</strong></li> <li>细胞内的这些物质就可以理解为 <strong>聚合里面的聚合根、实体以及值对象等</strong></li></ul> <p>在聚合内这些实体一起协作完成特定的业务功能。这个过程类似 DDD 设计时，确定微服务内功能要素和边界的过程。</p> <p>这里总结一下，就是说 <strong>每一个细分的领域都会有一个知识体系</strong> ，<strong>也就是 DDD 的领域模型</strong> 。在所有子域的研究完成后，我们就建立了全域的知识体系了，也就建立了全域的领域模型。</p> <p>上面我们用自然科学研究的方法，说明了领域可以通过细分为子域的方法，来降低研究的复杂度。现在我们把这个话题再切换到业务领域，对比验证下，二者的细分过程是否是一致的。这里以我从事的保险行业为例。</p> <p>保险是个比较大的领域，很早以前的保险核心系统把所有的功能都放在一个系统里来实现，这个系统就是我们常说的单体系统。后来单体系统开始无法适应保险业务的发展，因此保险公司开始了中台转型，引入分布式微服务架构来替换原来的单体系统。而分布式微服务架构就需要划分业务领域边界，建立领域模型，并实现微服务落地了。</p> <p>为实现保险领域建模和微服务建设，<strong>我们可以根据业务关联度以及流程边界</strong> 将保险领域细分为：承保、收付、再保以及理赔等子域，而承保子域还可以继续细分为投保、保全（寿险）、批改（财险）等子子域。</p> <p>在投保这个限界上下文内可以建立投保的领域模型，投保的领域模型最后映射到系统就是投保微服务。这就是一个保险领域的细分和微服务的建设过程。</p> <p>那么你可能会说，我不是保险行业的人，我怎么理解这个过程呢？我认为，不同行业的业务模型可能会不一样，<strong>但领域建模和微服务建设的过程和方法基本类似，其核心思想就是将问题域逐步分解，降低业务理解和系统实现的复杂度。</strong></p> <h2 id="如何理解核心域、通用域和支撑域"><a href="#如何理解核心域、通用域和支撑域" class="header-anchor">#</a> 如何理解核心域、通用域和支撑域？</h2> <p>在领域不断划分的过程中，领域会细分为不同的子域，<strong>子域可以根据自身重要性和功能属性划分为三类子域</strong> ，它们分别是：核心域、通用域和支撑域。</p> <ul><li>核心域：决定产品和公司核心竞争力的子域是核心域，它是业务成功的主要因素和公司的核心竞争力。</li> <li>通用域：没有太多个性化的诉求，同时被多个子域使用的通用功能子域是通用域。</li> <li>支撑域：还有一种功能子域是必需的，但既不包含决定产品和公司核心竞争力的功能，也不包含通用功能的子域，它就是支撑域。</li></ul> <p>这三类子域相较之下，核心域是最重要的，我们下面讲目的的时候还会以核心域为例详细介绍。通用域和支撑域如果对应到企业系统，举例来说的话，通用域则是你需要用到的通用系统，比如认证、权限等等，这类应用很容易买到，没有企业特点限制，不需要做太多的定制化。而支撑域则具有企业特性，但不具有通用性，例如数据代码类的数据字典等系统。</p> <p><strong>那为什么要划分核心域、通用域和支撑域，主要目的是什么呢？</strong></p> <p>还是拿上图的桃树来说吧。我们将桃树细分为了根、茎、叶、花、果实和种子等六个子域，那桃树是否有核心域？有的话，到底哪个是核心域呢？</p> <p><strong>不同的人对桃树的理解是不同的</strong> 。如果这棵桃树生长在公园里，在园丁的眼里，他喜欢的是「人面桃花相映红」的阳春三月，这时花就是桃树的核心域。但如果这棵桃树生长在果园里，对果农来说，他则是希望在丰收的季节收获硕果累累的桃子，这时果实就是桃树的核心域。</p> <p>在不同的场景下，不同的人对桃树核心域的理解是不同的，因此对桃树的处理方式也会不一样。园丁更关注桃树花期的营养，而果农则更关注桃树落果期的营养，有时为了保证果实的营养供给，还会裁剪掉疯长的茎和叶（通用域或支撑域）。</p> <p>同样的道理，公司在 IT 系统建设过程中，<strong>由于预算和资源有限，对不同类型的子域应有不同的关注度和资源投入策略</strong> ，记住好钢要用在刀刃上。</p> <p>很多公司的业务，<strong>表面看上去相似，但商业模式和战略方向是存在很大差异的</strong> ，因此公司的关注点会不一样，在划分核心域、通用域和支撑域时，其结果也会出现非常大的差异。</p> <p>比如同样都是电商平台的淘宝、天猫、京东和苏宁易购，他们的商业模式是不同的。</p> <ul><li><p>淘宝是 C2C 网站，个人卖家对个人买家，</p></li> <li><p>而天猫、京东和苏宁易购则是 B2C 网站，是公司卖家对个人买家。</p> <p>即便是苏宁易购与京东都是 B2C 的模式，他们的商业模式也是不一样的，苏宁易购是典型的传统线下卖场转型成为电商，京东则是直营加部分平台模式。</p></li></ul> <p><strong>商业模式的不同会导致核心域划分结果的不同</strong> 。有的公司核心域可能在客户服务，有的可能在产品质量，有的可能在物流。在公司领域细分、建立领域模型和系统建设时，我们就要结合公司战略重点和商业模式，找到核心域了，且重点关注核心域。</p> <p>如果你的公司刚好有意向转型微服务架构的话，我建议你和你的技术团队要将核心域的建设排在首位，最好是有绝对的掌控能力和自主研发能力，如果资源实在有限的话，可以在支撑域或者通用域上想想办法，暂时采用外购的方式也未尝不可。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>领域的核心思想就是将问题域逐级细分，来降低业务理解和系统实现的复杂度。通过领域细分，逐步缩小微服务需要解决的问题域，构建合适的领域模型，而领域模型映射成系统就是微服务了。</p> <p>核心域、支撑域和通用域的主要目标是：通过领域划分，区分不同子域在公司内的不同功能属性和重要性，从而公司可对不同子域采取不同的资源投入和建设策略，其关注度也会不一样。</p> <h2 id="思考题"><a href="#思考题" class="header-anchor">#</a> 思考题</h2> <p>请结合你所在公司的业务情况，尝试给业务做一个领域拆分，看看哪些子域是核心域，哪些子域是通用域和支撑域？</p> <h2 id="拓展阅读"><a href="#拓展阅读" class="header-anchor">#</a> 拓展阅读</h2> <ul><li><p>这里没看到 <strong>限界上下文</strong> 的概念，在桃树的例子中，细胞即为限界的上下文吗？还是说，器官，组织，细胞都是限界的上下文？</p> <p>不要纠结这里的限界上下文的概念，限界上下文是由它的 <strong>语义边界来确定的</strong> 。在 DDD 里面一个聚合可以是一个限界上下文，多个不同职能的聚合也可以组成为一个限界上下文，他们都在一个语义环境下。有的组织可能只有单一细胞，有的组织可能由多个不同功能的细胞组成的。我们重温一下生物课哈。由一种细胞所构成的均一组织。而由两种以上细胞构成的不均一的组织称为复合组织。<strong>特定功能（特定的语义环境）的组织基本上就可以对应到限界上下文。</strong></p></li> <li><p>有些领域边界特别模糊，不好划分。例如：某些子领域两边都靠，不知道怎么取舍</p> <p>看领域大小，不大的话可以考虑放在一个限界上下文内，做成一个微服务。比较大的话，可先做好聚合的边界，以后随时可以根据需要来拆分微服务。</p></li> <li><p>我的理解是基于业务的属性，把原先的三层变成 N 个三层，相互间用接口或者 API 传输，不知道我这样理解对不对。</p> <p>DDD 包括战略和战术设计两个部分，战略设计完成领域建模，战术设计完成微服务设计。</p> <p>您说的应该属于战术设计的部分，DDD 分层架构包括用户接入层、应用层、领域层和基础层四层，每层有不同的服务，职责不同。后面章节有详细介绍</p></li> <li><p>根据业务关联度以及流程边界细分的方法能介绍下吗？</p> <p>这一块的设计你可以参考传统的模块的设计方式。<strong>模块本身就是某类业务的功能聚合</strong> ，具有一定的业务功能的内聚性。而对于很多业务场景来说，<strong>很多领域的边界就是流程的边界</strong> ，比如商品、订单、货物，他们分别属于不同的流程，很自然的就形成了业务领域的边界。子域的划分需要结合公司自己的业务的情况，参考领域专家的意见来划分。</p></li> <li><p>对于领域问题来说，可以理解为。对一个问题不断的划分，直到划分为，我们熟悉的，能够快速处理的小问题。然后在对小问题处理在排列一个优先级。</p> <p>理解的非常到位。<strong>划分到最小就是聚合</strong> ，聚合之上就是限界上下文，根据限界上下文建立领域模型，然后设计微服务。</p></li> <li><p>事件风暴是不是类似是用户故事呢？</p> <p>差不多，但是不是一个人做用户故事分析。事件风暴参与的人很多，有项目团队和领域专家，这些人在一起采用头脑风暴的方式进行用户故事分析，找出领域对象，建立领域模型。后面会有专门的章节来讲解</p></li> <li><p>一个聚合是不是就是一个业务流程中剥离出来的「业务环节」？</p> <p>有一部分情况跟你说的业务环节类似。你可以这样打比方，若干个不同职责的人一起完成一件完整的事情，这些不同的人就是不同的实体或者值对象，完整的事情就是你业务环节里某一个完整业务逻辑。在聚合内将这些实体或值对象组织在一起完成共同的业务目标，这就是聚合。</p></li> <li><p>领域作为一个微服务，那子域是不是就是对外提供的一个个接口？</p> <p><strong>领域到子域是一个细分的过程</strong> 。这个还到不了微服务。将领域细分到一定程度后，业务就会更加的简单。你就可以采用事件风暴建立领域模型了，领域模型建立后，才能设计微服务。微服务可以对外暴露出一个个的服务。</p></li> <li><p>领域对应微服务。核心子领域，通用子领域，支撑子领域也是对应着微服务吗？还是可以理解成，和微服务划分的大小有关？</p> <p><strong>子域只是细分领域的过程产物</strong> 。领域可以细分为子域，子域可以继续划分子子域。这些子域根据重要性和属性特点可以分为核心子域、通用子域和支撑子域。划到一定的子域后，我们就可以开始事件风暴，建立聚合，划分限界上下文，<strong>限界上下文可以作为微服务设计和拆分的依据</strong> 。下一节会讲到。</p></li> <li><p>如何评估各个域划分？微服务粒度如何评估？</p> <p>你说的各个域是指核心域、通用域和支撑域吗？这个需要结合企业内部的战略来定，属于战略设计。</p> <p><strong>微服务的粒度需要结合企业运维的能力</strong> ，如果没有 CICD 和自动化的运维能力，不建议拆的过细。微服务设计原则里会有详细介绍，后面会讲解</p></li> <li><p>DDD 研究和解决业务问题的工具和方法，那么什么是 DDD 做不了的事情呢？DDD 能解决的问题和不能解决的问题都是什么呢？这个事情不想清楚，就总会拿 DDD 试图解决业务问题的方方面面。</p> <p>DDD 说白了最终目的还是为了系统建设。企业的复杂业务如果不做细分的话，系统实现的难度和复杂度就会很高，其本质就是通过将复杂问题简单化，分而治之，降低复杂度。</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/note-book2/edit/man/docs/ddd/01/02.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-04-20 06:19:19</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-book2/ddd/01/01.html" class="prev">
        01 | 领域驱动设计：微服务设计为什么要选择 DDD?
      </a></span> <span class="next"><a href="/note-book2/ddd/01/03.html">
        03 | 限界上下文：定义领域边界的利器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/note-book2/assets/js/app.c231c0a5.js" defer></script><script src="/note-book2/assets/js/2.64eb5107.js" defer></script><script src="/note-book2/assets/js/67.c393eaf5.js" defer></script><script src="/note-book2/assets/js/50.da39fd24.js" defer></script>
  </body>
</html>
